(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{9955:function(e,t,s){Promise.resolve().then(s.bind(s,1272))},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},1272:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var n=s(7437),a=s(2265),r=s(9376),o=s(7648),c=s(643),l=s.n(c),i=s(9361),u=s(8211);function d(e){let{params:t}=e,{showToast:s}=(0,u.p)(),c=(0,r.useRouter)(),d=t.id,[_,h]=(0,a.useState)(null),[f,p]=(0,a.useState)(!0),[m,g]=(0,a.useState)(null),[N,j]=(0,a.useState)(null),x=(0,a.useCallback)(async()=>{p(!0),g(null);let e=localStorage.getItem("token");if(e)try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=JSON.parse(window.atob(t));j(String(s.userId))}catch(e){console.error("トークンのデコードに失敗しました",e),j(null)}try{let e=await fetch("/api/posts/".concat(d));if(e.ok){let t=await e.json();h(t)}else{let t=await e.json();g(t.error||"投稿の取得に失敗しました。")}}catch(e){g("予期せぬエラーが発生しました。"),console.error(e)}finally{p(!1)}},[d]);return((0,a.useEffect)(()=>{x()},[x]),f)?(0,n.jsx)("div",{className:l().loadingMessage,children:"投稿を読み込み中..."}):m?(0,n.jsx)("div",{className:l().errorMessage,children:m}):_?(0,n.jsxs)("div",{className:l().container,children:[(0,n.jsxs)("header",{className:l().header,children:[(0,n.jsx)("h1",{className:l().title,children:"投稿詳細"}),(0,n.jsx)(o.default,{href:"/",children:(0,n.jsx)("button",{className:l().backButton,children:"ホームに戻る"})})]}),(0,n.jsx)("main",{className:l().mainContent,children:(0,n.jsx)(i.S,{post:_,onPostDeleted:()=>{c.push("/"),s({title:"成功",description:"投稿が削除されました。",variant:"success"})},currentUserId:N})})]}):(0,n.jsx)("div",{className:l().errorMessage,children:"投稿が見つかりませんでした。"})}},643:function(e){e.exports={container:"post_container___fUkB",header:"post_header__ZZjtN",title:"post_title__4b_8c",backButton:"post_backButton__o7Fsh",loadingMessage:"post_loadingMessage__XnXRv",errorMessage:"post_errorMessage__6ATIb",mainContent:"post_mainContent__4_dxN"}}},function(e){e.O(0,[708,370,803,555,361,971,117,744],function(){return e(e.s=9955)}),_N_E=e.O()}]);