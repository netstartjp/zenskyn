(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6548:function(e,t,n){Promise.resolve().then(n.bind(n,3372))},9376:function(e,t,n){"use strict";var o=n(5475);n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}}),n.o(o,"useSearchParams")&&n.d(t,{useSearchParams:function(){return o.useSearchParams}})},3372:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o=n(7437),r=n(4811),i=n.n(r);n(2778);var l=n(8211),s=n(1310),u=n(2265),a=n(7648),c=n(9376);let d=()=>{let e=(0,c.useRouter)(),[t,n]=(0,u.useState)(null),[r,i]=(0,u.useState)(""),l=(0,u.useCallback)(async()=>{let e=localStorage.getItem("token");if(!e){n({loggedIn:!1,userId:null,isAdmin:!1});return}try{let t=await fetch("/api/auth/status",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();n(e)}else console.error("Failed to fetch auth status:",await t.json()),n({loggedIn:!1,userId:null,isAdmin:!1}),localStorage.removeItem("token")}catch(e){console.error("Error fetching auth status:",e),n({loggedIn:!1,userId:null,isAdmin:!1}),localStorage.removeItem("token")}},[]);return(0,u.useEffect)(()=>{l();let e=()=>{l()};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[l]),(0,o.jsxs)("nav",{children:[(0,o.jsxs)("ul",{style:{listStyle:"none",padding:0},children:[(0,o.jsx)("li",{style:{marginBottom:"10px"},children:(0,o.jsx)(a.default,{href:"/",style:{textDecoration:"none",color:"#333"},children:"ホーム"})}),(0,o.jsx)("li",{style:{marginBottom:"10px"},children:(0,o.jsx)(a.default,{href:"/settings",style:{textDecoration:"none",color:"#333"},children:"設定"})}),(0,o.jsx)("li",{style:{marginBottom:"10px"},children:(0,o.jsx)(a.default,{href:"/local-timeline",style:{textDecoration:"none",color:"#333"},children:"ZenSky タイムライン"})}),(0,o.jsx)("li",{style:{marginBottom:"10px"},children:(0,o.jsx)(a.default,{href:"/terms",style:{textDecoration:"none",color:"#333"},children:"利用規約"})})]}),(0,o.jsx)("div",{style:{marginTop:"20px",borderTop:"1px solid #eee",paddingTop:"20px"},children:(0,o.jsxs)("form",{onSubmit:t=>{t.preventDefault(),r.trim()&&e.push("/search?q=".concat(encodeURIComponent(r.trim())))},style:{display:"flex",marginBottom:"10px"},children:[(0,o.jsx)("input",{type:"text",placeholder:"検索...",value:r,onChange:e=>i(e.target.value),style:{flexGrow:1,padding:"8px",border:"1px solid #ccc",borderRadius:"5px 0 0 5px"}}),(0,o.jsx)("button",{type:"submit",style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"8px 12px",borderRadius:"0 5px 5px 0",cursor:"pointer"},children:"検索"})]})}),(0,o.jsxs)("div",{style:{marginTop:"auto",paddingTop:"20px",borderTop:"1px solid #eee"},children:[(null==t?void 0:t.isAdmin)&&(0,o.jsx)(a.default,{href:"/admin",children:(0,o.jsx)("button",{style:{width:"100%",padding:"10px",marginBottom:"10px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"管理者ダッシュボード"})}),(null==t?void 0:t.loggedIn)&&(0,o.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),n({loggedIn:!1,userId:null,isAdmin:!1}),e.push("/")},style:{width:"100%",padding:"10px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"ログアウト"})]})]})};var h=n(1014),m=n.n(h);let x=()=>{let[e,t]=(0,u.useState)(!1),n=(0,u.useRef)(null);return(0,c.useRouter)(),(0,u.useEffect)(()=>{let e=e=>{n.current&&!n.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[n]),(0,o.jsxs)("div",{className:m().mobileMenuContainer,ref:n,children:[(0,o.jsx)("button",{className:m().hamburgerButton,onClick:()=>t(!e),children:"☰"}),e&&(0,o.jsx)("div",{className:m().mobileMenuOverlay,children:(0,o.jsxs)("div",{className:m().mobileMenuContent,children:[(0,o.jsx)("button",{className:m().closeButton,onClick:()=>t(!1),children:"✕"}),(0,o.jsx)("h2",{className:m().menuTitle,children:"メニュー"}),(0,o.jsx)(d,{})]})})]})};function b(e){let{children:t}=e,[n,r]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{let e=()=>{r(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,o.jsxs)("html",{lang:"en",children:[(0,o.jsx)("head",{children:(0,o.jsx)("title",{children:"ZenSky N"})}),(0,o.jsx)("body",{className:i().className,children:(0,o.jsx)(l.V,{children:(0,o.jsx)(s.u,{children:(0,o.jsxs)("div",{style:{display:"flex"},children:[n?(0,o.jsx)(x,{}):(0,o.jsxs)("aside",{className:"sidebar",children:[(0,o.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"20px"},children:"メニュー"}),(0,o.jsx)(d,{})]}),(0,o.jsxs)("div",{className:n?"main-content-no-sidebar":"main-content-with-sidebar",children:[" ",(0,o.jsx)("div",{children:t})]})]})})})})]})}},1310:function(e,t,n){"use strict";n.d(t,{t:function(){return u},u:function(){return s}});var o=n(7437),r=n(2265),i=n(5367);let l=(0,r.createContext)(void 0);function s(e){let{children:t}=e,[n,s]=(0,r.useState)(!1),[u,a]=(0,r.useState)(null),c=(0,r.useRef)(null),d=(0,r.useCallback)(()=>{s(!1),a(null),c.current&&(window.clearTimeout(c.current),c.current=null)},[]),h=(0,r.useCallback)(e=>{let{anchorElement:t,duration:n=3e3,...o}=e;d(),a({...o,anchorElement:t,duration:n}),s(!0),n>0&&(c.current=window.setTimeout(()=>{d()},n))},[d]),m=(0,r.useCallback)(()=>{(null==u?void 0:u.onConfirm)&&u.onConfirm(),d()},[u,d]),x=(0,r.useCallback)(()=>{(null==u?void 0:u.onCancel)&&u.onCancel(),d()},[u,d]),b=u?(e=>{switch(e){case"success":return{bg:"bg-green-500",text:"text-white"};case"error":return{bg:"bg-red-500",text:"text-white"};case"warning":return{bg:"bg-yellow-500",text:"text-gray-900"};default:return{bg:"bg-blue-500",text:"text-white"}}})(u.variant||"info"):{bg:"",text:""};return(0,o.jsxs)(l.Provider,{value:{showPopover:h},children:[t,u&&u.anchorElement&&(0,o.jsxs)(i.fC,{open:n,onOpenChange:s,children:[(0,o.jsx)(i.ee,{asChild:!0,children:(0,o.jsx)("div",{style:{position:"absolute",top:u.anchorElement.getBoundingClientRect().top,left:u.anchorElement.getBoundingClientRect().left,width:u.anchorElement.getBoundingClientRect().width,height:u.anchorElement.getBoundingClientRect().height,pointerEvents:"none"}})}),(0,o.jsx)(i.h_,{children:(0,o.jsxs)(i.VY,{className:"rounded-md shadow-lg p-4 text-sm ".concat(b.bg," ").concat(b.text),sideOffset:5,onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),children:[(0,o.jsx)("h3",{className:"font-medium",children:u.title}),u.description&&(0,o.jsx)("p",{children:u.description}),(u.onConfirm||u.onCancel)&&(0,o.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[u.onCancel&&(0,o.jsx)("button",{onClick:x,className:"px-3 py-1 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"キャンセル"}),u.onConfirm&&(0,o.jsx)("button",{onClick:m,className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"OK"})]}),(0,o.jsx)(i.Eh,{className:"fill-current text-white"}),(0,o.jsx)("button",{className:"absolute top-1 right-1 p-1 rounded-full hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-opacity-50",onClick:d,children:"✕"})]})})]})]})}function u(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useClickableToastPopover must be used within a ClickableToastPopoverProvider");return e}},8211:function(e,t,n){"use strict";n.d(t,{V:function(){return s},p:function(){return u}});var o=n(7437),r=n(2265),i=n(5803);let l=(0,r.createContext)(void 0);function s(e){let{children:t}=e,[n,s]=(0,r.useState)(!1),[u,a]=(0,r.useState)({title:"",description:"",variant:"info"}),c=r.useRef(null),d=(0,r.useCallback)(e=>{a(e),s(!0),c.current&&window.clearTimeout(c.current),c.current=window.setTimeout(()=>{s(!1)},3e3)},[]);return(0,o.jsxs)(i.zt,{swipeDirection:"right",children:[(0,o.jsx)(l.Provider,{value:{showToast:d},children:t}),(0,o.jsxs)(i.fC,{open:n,onOpenChange:s,className:"toast ".concat(u.variant),children:[(0,o.jsx)(i.Dx,{children:u.title}),u.description&&(0,o.jsx)(i.dk,{children:u.description})]}),(0,o.jsx)(i.l_,{})]})}function u(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}},2778:function(){},1014:function(e){e.exports={mobileMenuContainer:"MobileMenu_mobileMenuContainer__uSiT5",hamburgerButton:"MobileMenu_hamburgerButton__t0tZB",mobileMenuOverlay:"MobileMenu_mobileMenuOverlay__lPL91",mobileMenuContent:"MobileMenu_mobileMenuContent__KsOL6",closeButton:"MobileMenu_closeButton__xbQ49",menuTitle:"MobileMenu_menuTitle__ZtVO2",mobileMenuActions:"MobileMenu_mobileMenuActions__ilaxF",searchForm:"MobileMenu_searchForm__06WKm",searchInput:"MobileMenu_searchInput__0k2s0",searchButton:"MobileMenu_searchButton__jiKEz",adminButton:"MobileMenu_adminButton__6zfn4",logoutButton:"MobileMenu_logoutButton___0zqN"}},4811:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(e){e.O(0,[581,803,555,971,117,744],function(){return e(e.s=6548)}),_N_E=e.O()}]);