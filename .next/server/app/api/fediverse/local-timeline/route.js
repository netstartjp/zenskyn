"use strict";(()=>{var e={};e.id=889,e.ids=[889],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6651:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p});var i={};r.r(i),r.d(i,{GET:()=>u,dynamic:()=>l});var s=r(9303),n=r(8716),a=r(670),o=r(7070);let l="force-dynamic";async function u(e){let t=process.env.FEDIVERSE_INSTANCE_URL;if(!t)return o.NextResponse.json({error:"Fediverse instance URL is not configured."},{status:500});try{let e=`${t}/api/notes/local-timeline`,r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({limit:40})});if(!r.ok){let e=await r.text();return console.error(`Failed to fetch Misskey global timeline: ${r.status} ${r.statusText} - ${e}`),o.NextResponse.json({error:`Failed to fetch global timeline from Fediverse instance: ${r.statusText}`},{status:r.status})}let i=(await r.json()).map(e=>({id:`misskey-${e.id}`,content:e.text||"",createdAt:e.createdAt,author:{id:`misskey-user-${e.user.id}`,name:e.user.name||e.user.username},likedByCurrentUser:!1,likesCount:e.reactions?Object.values(e.reactions).reduce((e,t)=>e+t,0):0,type:"ORIGINAL",parentId:null,parent:void 0,children:[]}));return o.NextResponse.json(i)}catch(e){return console.error("Error fetching Misskey global timeline:",e),o.NextResponse.json({error:"Internal Server Error while fetching global timeline."},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/fediverse/local-timeline/route",pathname:"/api/fediverse/local-timeline",filename:"route",bundlePath:"app/api/fediverse/local-timeline/route"},resolvedPagePath:"C:\\Users\\kazuy\\sns\\src\\app\\api\\fediverse\\local-timeline\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:m}=c,f="/api/fediverse/local-timeline/route";function v(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:p})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[276,972],()=>r(6651));module.exports=i})();