(()=>{var e={};e.id=797,e.ids=[797],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},920:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>d,pages:()=>u,routeModule:()=>_,tree:()=>c}),r(4856),r(9078),r(2029),r(5866);var a=r(3191),t=r(8716),n=r(7922),i=r.n(n),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(s,o);let c=["",{children:["search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4856)),"C:\\Users\\kazuy\\sns\\src\\app\\search\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9078)),"C:\\Users\\kazuy\\sns\\src\\app\\search\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"C:\\Users\\kazuy\\sns\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\kazuy\\sns\\src\\app\\search\\page.tsx"],d="/search/page",h={require:r,loadChunk:()=>Promise.resolve()},_=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/search/page",pathname:"/search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6127:(e,s,r)=>{Promise.resolve().then(r.bind(r,7191))},2620:(e,s,r)=>{Promise.resolve().then(r.bind(r,6519))},7191:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n});var a=r(326),t=r(7577);function n({children:e}){return a.jsx(t.Suspense,{fallback:a.jsx("div",{children:"検索結果を読み込み中..."}),children:e})}},6519:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var a=r(326),t=r(7577),n=r(5047),i=r(434),l=r(7318),o=r(7294),c=r.n(o);function u(){let e=(0,n.useSearchParams)().get("q"),[s,r]=(0,t.useState)([]),[o,u]=(0,t.useState)([]),[d,h]=(0,t.useState)(!0),[_,p]=(0,t.useState)(null),[m,x]=(0,t.useState)("posts"),g=(0,t.useCallback)(async()=>{if(!e){h(!1),p("検索クエリがありません。");return}h(!0),p(null);try{let s=await fetch(`/api/search/posts?q=${encodeURIComponent(e)}`);if(s.ok){let e=await s.json();r(e)}else{let e=await s.json();p(e.error||"投稿検索結果の取得に失敗しました。")}let a=await fetch(`/api/search/users?q=${encodeURIComponent(e)}`);if(a.ok){let e=await a.json();u(e)}else{let e=await a.json();p(e.error||"ユーザー検索結果の取得に失敗しました。")}}catch(e){p("予期せぬエラーが発生しました。"),console.error(e)}finally{h(!1)}},[e]);return d?a.jsx("div",{className:c().loadingMessage,children:"検索中..."}):_?a.jsx("div",{className:c().errorMessage,children:_}):(0,a.jsxs)("div",{className:c().container,children:[(0,a.jsxs)("h1",{className:c().title,children:['検索結果: "',e,'"']}),(0,a.jsxs)("div",{className:c().tabs,children:[(0,a.jsxs)("button",{className:`${c().tabButton} ${"posts"===m?c().activeTab:""}`,onClick:()=>x("posts"),children:["投稿 (",s.length,")"]}),(0,a.jsxs)("button",{className:`${c().tabButton} ${"users"===m?c().activeTab:""}`,onClick:()=>x("users"),children:["ユーザー (",o.length,")"]})]}),"posts"===m&&(0===s.length?a.jsx("p",{className:c().noResults,children:"該当する投稿は見つかりませんでした。"}):a.jsx(l.T,{posts:s,onPostDeleted:g})),"users"===m&&(0===o.length?a.jsx("p",{className:c().noResults,children:"該当するユーザーは見つかりませんでした。"}):a.jsx("div",{className:c().userList,children:o.map(e=>a.jsx("div",{className:c().userCard,children:(0,a.jsxs)(i.default,{href:`/users/${e.id}`,className:c().userLink,children:[e.profileImageUrl&&a.jsx("img",{src:e.profileImageUrl,alt:"プロフィール画像",className:c().userProfileImage}),(0,a.jsxs)("div",{className:c().userInfo,children:[a.jsx("h3",{className:c().userName,children:e.name||`ユーザー ${e.id}`}),e.bio&&a.jsx("p",{className:c().userBio,children:e.bio})]})]})},e.id))}))]})}},7294:e=>{e.exports={container:"search_container__iBLRa",title:"search_title__P57kX",loadingMessage:"search_loadingMessage__vfeHA",errorMessage:"search_errorMessage__iN3ti",noResults:"search_noResults__sOYXB",tabs:"search_tabs__IFRFW",tabButton:"search_tabButton__cjb_d",activeTab:"search_activeTab__HA41o",userList:"search_userList__7X9EV",userCard:"search_userCard__bimCb",userLink:"search_userLink__xDSvj",userProfileImage:"search_userProfileImage__oUgFp",userInfo:"search_userInfo__imvDu",userName:"search_userName__QwxQF",userEmail:"search_userEmail__xiwdG",userBio:"search_userBio__knK_Y"}},9078:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\kazuy\sns\src\app\search\layout.tsx#default`)},4856:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\kazuy\sns\src\app\search\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[276,928,484,318],()=>r(920));module.exports=a})();